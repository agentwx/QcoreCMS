// Generated by CoffeeScript 1.6.3
(function() {
  define(['admin/provider'], function(app) {
    app.config([
      '$httpProvider', 'MsgProvider', function($httpProvider, MsgProvider) {
        $httpProvider.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
        $httpProvider.defaults.transformRequest = function(data) {
          return $.param(data != null ? data : {});
        };
        return $httpProvider.defaults.transformResponse = function(data, headersGetter) {
          var json;
          if (headersGetter()['content-type'].indexOf('json') !== -1) {
            json = angular.fromJson(data);
            if (json.success) {
              return json.data;
            } else {
              MsgProvider.$get().error(json.msg);
              return null;
            }
          } else {
            return data;
          }
        };
      }
    ]);
    return app;
  });

}).call(this);
