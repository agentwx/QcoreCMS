// Generated by CoffeeScript 1.6.3
(function() {
  define(['admin/directive'], function(app) {
    app.controller('categoryCtrl', [
      '$scope', '$resource', '$http', 'Msg', function($scope, $resource, $http, Msg) {
        var Catgory, actions;
        Msg.alert('hello word');
        actions = {
          save: {
            method: 'POST'
          },
          mulit: {
            method: 'GET',
            isArray: true
          }
        };
        Catgory = $resource('/api/category', {}, actions);
        $scope.isList = true;
        $scope.catgorys = Catgory.mulit();
        $scope._AppFormsCmsCategoryName = 'categoryFrom';
        $scope.onSubmitAppFormsCmsCategory = function() {
          var formEl, postData;
          formEl = this.formEl;
          postData = {};
          formEl.find('[name]').each(function() {
            var self;
            self = $(this);
            return postData[self.attr('name')] = self.val();
          });
          return Catgory.save(postData, function() {
            $scope.isList = true;
            return $scope.catgorys = Catgory.mulit();
          });
        };
        $scope.edit = function(val) {
          var formEl;
          formEl = this.formEl;
          $scope.isList = false;
          return formEl.find('[name]').each(function() {
            var self;
            self = $(this);
            if (val[self.attr('name')]) {
              return self.val(val[self.attr('name')]);
            }
          });
        };
        $scope.add = function() {
          this.formEl[0].reset();
          this.formEl.find('[type=hidden]').each(function() {
            return $(this).val('');
          });
          return $scope.isList = false;
        };
        return $scope.onLoadAppFormsCmsCategory = function(el) {
          var formEl;
          formEl = el.find('form');
          return $scope.formEl = formEl;
        };
      }
    ]);
  });

}).call(this);
