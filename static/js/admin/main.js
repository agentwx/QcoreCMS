// Generated by CoffeeScript 1.6.3
(function() {
  require(['jQuery', 'angular', 'admin/route'], function($, angular, app) {
    var ctrls, routes;
    ctrls = [];
    routes = [];
    $.getJSON('/api/admin.menu', function(json) {
      var v, _i, _len, _ref;
      if (false === json.success) {
        alert(json.msg);
        return;
      }
      _ref = json.data.routes;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        v = _ref[_i];
        ctrls.push(v.js);
        routes.push(v);
      }
      require(ctrls, function() {
        app.config([
          '$routeProvider', function($routeProvider) {
            var _j, _len1, _results;
            _results = [];
            for (_j = 0, _len1 = routes.length; _j < _len1; _j++) {
              v = routes[_j];
              _results.push($routeProvider.when(v.uri, {
                controller: v.name,
                templateUrl: v.tpl
              }));
            }
            return _results;
          }
        ]);
        angular.bootstrap(document, ['adminApp']);
      });
    });
  });

}).call(this);
